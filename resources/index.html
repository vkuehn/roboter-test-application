<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery UI Slider - Range with fixed minimum</title>
<link href="/javascripts/jquery-ui-1.12.1.custom/jquery-ui.css"	rel="stylesheet">
<link	href="/javascripts/jquery-ui-iconfont-master/jquery-ui.icon-font.css"	rel="stylesheet" type="text/css" />
<link href="/stylesheets/rca.css" rel="stylesheet"	type="text/css" />

<script	src="/javascripts/jquery-ui-1.12.1.custom/external/jquery/jquery.js"></script>
<script src="/javascripts/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
</head>
<body>

	<div id="labelCurrentSet">
		<label>Currently Set:</label>
		<input type="text" id="positionYaw" readonly /> 
		<input type="text" id="positionPitch" readonly	/>
	</div>

	<div id="slider-position-pitch"></div>
	<div id="slider-position-yaw"></div>

	<div id='labelPositionReached'>
		<label>Move Result:</label>
		<input type='text' id='moveResult' readonly />
	</div>
		<!-- button forward---------------------------------------------------------------->
	<div id="tableDirections">
		<table>
			<tr>
				<td><a id="turnLeft" class="ui-icon ui-icon-arrowreturn-1-w"><span>turnwest</span></a></td></td>
				<td><a id="moveForward" class="ui-icon ui-icon-arrow-1-n"><span>north</span></a></td>
				<td><a id="turnRight" class="ui-icon ui-icon-arrowreturn-1-e"><span>turneast</span></a></td></td>
			</tr>
			<tr>
				<td><a id="moveLeft" class="ui-icon ui-icon-arrow-1-w"><span>west</span></a></td>
				<td></td>
				<td><a id="moveRight" class="ui-icon ui-icon-arrow-1-e"><span>east</span></a></td>
			</tr>
						<tr>
				<td></td>
				<td><a id="moveBackward" class="ui-icon ui-icon-arrow-1-s"><span>south</span></a></td>
				<td></td>
			</tr>
		</table>
	</div>
	
	<script>
		var appName = 'rca'; 
		var url = '/' + appName + '/api';
		var left = { posYaw : 37, posPitch : 37 } //TODO in zentrale Konfig auslagern und auch in app laden
		var center = { move: 'stop' }
		var textYaw = 'yaw';
		var textPitch = 'pitch';

		//--init-------------------------------------------------
		$(function() {
			/*set default screen text values*/
			$("#moveResult").val(" [ not yet ]");
			$("#positionYaw").val(textYaw + " " + left.posYaw);
			$("#positionPitch").val(textPitch + " " + left.posPitch);
			/*set arrow functions*/
			$("#moveLeft").click(function(){ center.move ='left';  doMove(center)} );
			$("#moveForward").click(function(){ center.move ='forward';  doMove(center)} );
			$("#moveRight").click(function() { center.move ='right';  doMove(center)} );
			$("#moveBackward").click(function() { center.move ='backward';  doMove(center)} );
			$("#turnLeft").click(function() { center.move ='turnLeft';  doMove(center)} );
			$("#turnRight").click(function() { center.move ='turunRight';  doMove(center)} );
		});

		/*yaw slider*/
		$(function() {
			$("#slider-position-yaw").slider({
				range : "min",
				value : left.posYaw,
				min : 1,
				max : 255,
				slide : function(event, ui) {
					left.posYaw = ui.value;
					$("#positionYaw").val(textYaw + " " + left.posYaw);
					$.post(url + '/eye/left', left).done(function(leftEye) {	showMyPositions(leftEye); });
				}
			});
		});

		/*pitch slider*/
		$(function() {
			$("#slider-position-pitch").slider({
				orientation : "vertical",
				range : "min",
				value : left.posPitch,
				min : 1,
				max : 255,
				slide : function(event, ui) {
					left.posPitch = ui.value;
					$("#positionPitch").val(textPitch + " " + left.posPitch);
					$.post(url + '/eye/left', left).done(function(leftEye) {	showMyPositions(leftEye);	});
				}
			});
		});

		function showMyPositions(myPositions) {
			var positions = "";
			for ( var p in myPositions) {
				positions = positions + p + ":" + (myPositions[p] + " ");
			}
			showMoveResult(positions);
		}
		
		function doMove(m){
			$.post(url + '/move', m).done( function(result) {	showMoveResult(result);	});
		}
		
		function showMoveResult(result){
			$("#moveResult").val(result);
		}
	</script>
</body>
</html>
